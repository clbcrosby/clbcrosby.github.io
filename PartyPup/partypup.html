<!DOCTYPE html>
<HTML>
<head>
<title>Party Pup</title>
</head>
<body>
<canvas id=Canvas width=1280 height=720 style="background-color: lightblue">
</canvas>
<script>

var ctx = Canvas.getContext("2d");
ctx.font="24px Arial";

var delay = 15;

// Game code starts here.

// Load background and sprites.

var background = new Image();
background.src = "https://clbcrosby.github.io/PartyPup/background.png"

var pup = new Image();
pup.src = "https://clbcrosby.github.io/PartyPup/pup.png"

var rewardpup = new Image();
rewardpup.src = "https://clbcrosby.github.io/PartyPup/rewardpup.png"

var pupx = 300;
var pupy = 630;

var fence = new Image();
fence.src = "https://clbcrosby.github.io/PartyPup/fence.png"

var floater = new Image();
floater.src = "https://clbcrosby.github.io/PartyPup/floater.png"

var fencex = 1200;
var fencey = 500;
var treaty = fencey + 10;

var treat = new Image();
treat.src = "https://clbcrosby.github.io/PartyPup/treat.png"

var round = 0;
var score = 0;
var highscore = 0;
var gameover = 0;

var a = 0;
var b = 0;
var c = 0;
var d = 0;
var e = 0;

// I don't know how to make the pup jump.

function jump40 () {
  pupy = 630;
}

function jump39 () {
  pupy = pupy + 25;
  setTimeout (jump40, delay);
}

function jump38 () {
  pupy = pupy + 23;
  setTimeout (jump39, delay);
}

function jump37 () {
  pupy = pupy + 22;
  setTimeout (jump38, delay);
}

function jump36 () {
  pupy = pupy + 20;
  setTimeout (jump37, delay);
}

function jump35 () {
  pupy = pupy + 20;
  setTimeout (jump36, delay);
}

function jump34 () {
  pupy = pupy + 18;
  setTimeout (jump35, delay);
}

function jump33 () {
  pupy = pupy + 17;
  setTimeout (jump34, delay);
}

function jump32 () {
  pupy = pupy + 15;
  setTimeout (jump33, delay);
}

function jump31 () {
  pupy = pupy + 15;
  setTimeout (jump32, delay);
}

function jump30 () {
  pupy = pupy + 13;
  setTimeout (jump31, delay);
}

function jump29 () {
  pupy = pupy + 12;
  setTimeout (jump30, delay);
}

function jump28 () {
  pupy = pupy + 10;
  setTimeout (jump29, delay);
}

function jump27 () {
  pupy = pupy + 10;
  setTimeout (jump28, delay);
}

function jump26 () {
  pupy = pupy + 8;
  setTimeout (jump27, delay);
}

function jump25 () {
  pupy = pupy + 7;
  setTimeout (jump26, delay);
}

function jump24 () {
  pupy = pupy + 5;
  setTimeout (jump25, delay);
}

function jump23 () {
  pupy = pupy + 5;
  setTimeout (jump24, delay);
}

function jump22 () {
  pupy = pupy + 2;
  setTimeout (jump23, (delay*2));
}

function jump21 () {
  pupy = pupy + 2;
  setTimeout (jump22, (delay*2));
}

function jump20 () {
  pupy = pupy - 2;
  setTimeout (jump21, (delay*2));
}

function jump19 () {
  pupy = pupy - 2;
  setTimeout (jump20, delay);
}

function jump18 () {
  pupy = pupy - 5;
  setTimeout (jump19, delay);
}

function jump17 () {
  pupy = pupy - 5;
  setTimeout (jump18, delay);
}

function jump16 () {
  pupy = pupy - 7;
  setTimeout (jump17, delay);
}

function jump15 () {
  pupy = pupy - 8;
  setTimeout (jump16, delay);
}

function jump14 () {
  pupy = pupy - 10;
  setTimeout (jump15, delay);
}

function jump13 () {
  pupy = pupy - 10;
  setTimeout (jump14, delay);
}

function jump12 () {
  pupy = pupy - 12;
  setTimeout (jump13, delay);
}

function jump11 () {
  pupy = pupy - 13;
  setTimeout (jump12, delay);
}

function jump10 () {
  pupy = pupy - 15;
  setTimeout (jump11, delay);
}

function jump9 () {
  pupy = pupy - 15;
  setTimeout (jump10, delay);
}

function jump8 () {
  pupy = pupy - 17;
  setTimeout (jump9, delay);
}

function jump7 () {
  pupy = pupy - 18;
  setTimeout (jump8, delay);
}

function jump6 () {
  pupy = pupy - 20;
  setTimeout (jump7, delay);
}

function jump5 () {
  pupy = pupy - 20;
  setTimeout (jump6, delay);
}

function jump4 () {
    pupy = pupy - 22;
    setTimeout(jump5, delay);
}

function jump3 () {
    pupy = pupy - 23;
    setTimeout(jump4, delay);
}

function jump2 () {
    pupy = pupy - 25;
    setTimeout(jump3, delay);
}

function jump1 () {
    pupy = pupy - 25;
    setTimeout(jump2, delay);
}

// Checks for collision

function ImagesTouching(img2, x2, y2) {
         if (pupx >= x2+img2.width || pupx+pup.width <= x2) return false;   // too far to the side
         if (pupy >= y2+img2.height || pupy+pup.height <= y2) return false; // too far above/below
         return true;                                                       // otherwise, overlap   
         }

// Makes fences.

function regularfence (n, m) {
  ctx.drawImage(fence, (fencex + n), (fencey + m));
    if (ImagesTouching(fence, (fencex + n), (fencey + m))) {
      gameover = (gameover + 1);
    }
}

function floatfence (n, m) {
  ctx.drawImage(floater, (fencex + n), (fencey - 150 + m));
    if (ImagesTouching(floater, (fencex + n), (fencey - 150 + m))) {
      gameover = (gameover + 1);
    }
}

function addtreat () {
  ctx.drawImage(treat, (fencex + 1280), treaty);
    if (ImagesTouching(treat, (fencex + 1280), treaty)) {
      score = (score + 500);
      treaty = -100;
    }
  ctx.fillText("Yum! +500!", (fencex + 1380), (treaty + 400));
  ctx.drawImage(rewardpup, (fencex + 1380), (treaty + 410));
}

function RandInt(max) { 
   n = Math.floor(Math.random() * max);  
   return(n);  
} 

function drawfence() {
  fencex = (fencex - 4);
  if (fencex < -1280) {
    fencex = 1280;
    round = (round + 1);
    if (round > 6) {
      a = RandInt(3);
      b = RandInt(3);
      c = RandInt(3);
      d = RandInt(3);
      e = RandInt(2);
    }
    treaty = (fencey + 10);
  }
  if (round == 0) {
    ctx.fillText("Tap the screen to jump.", (fencex - 320), Canvas.height/2);
    ctx.fillText("Get treats for bonus points!", (fencex + 960), Canvas.height/2);
    regularfence (0, 50);
    regularfence (640, 50);
    addtreat ();
  }
  if (round == 1) {
    regularfence (0, 50);
    regularfence (320, 25);
    regularfence (640, 10);
    regularfence (960, 0);
    addtreat ();
  }
  if (round >= 2 && round <= 4) {
    regularfence (0, 0);
    regularfence (320, 0);
    regularfence (640, 0);
    regularfence (960, 0);
    addtreat ();
  }
  if (round == 5) {
    floatfence (0, 0);
    regularfence (320, 0);
    floatfence (640, 0);
    regularfence (960, 0);
    addtreat ();
  }
  if (round == 6) {
    regularfence (0, 0);
    floatfence (320, 0);
    regularfence (640, 0);
    floatfence (960, 0);
    addtreat ();
  }
  if (round > 6) {
    if (a < 2) {regularfence (0, 0)}
    if (a == 2) {floatfence (0, 0)}
    if (b < 2) {regularfence (320, 0)}
    if (b == 2) {floatfence (320, 0)}
    if (c < 2) {regularfence (640, 0)}
    if (c == 2) {floatfence (640, 0)}
    if (d < 2) {regularfence (960, 0)}
    if (d == 2) {floatfence (960, 0)}
    if (e == 0) {addtreat ()}
    if (e == 1) {regularfence (1280, 0)}
  }
}

// Clears the canvas and redraws sprites at their current coordinates.

function drawframe () {
  if (gameover == 0) {
    ctx.clearRect(0, 0, Canvas.width, Canvas.height);
    ctx.drawImage(background, 0, 0);
    ctx.drawImage(pup, pupx, pupy);
    drawfence();
    score = (score + 1);
    ctx.fillText("Score: " + score, 10, 60);
    ctx.fillText("High Score: " + highscore, 10, 30);
  }
  if (gameover > 0) {
    ctx.fillText("Game Over", Canvas.width/2, Canvas.height/2);
    ctx.fillText("Tap to play again.", Canvas.width/2, ((Canvas.height/2) + 30));
      if (score > highscore) {highscore = score}
  }
}

setInterval (drawframe, delay);

function resetgame () {
  gameover = 0;
  fencex = 1200;
  round = 0;
  score = 0;
  treaty = (fencey + 10);
}

function getplayerinput(MyEvent) {
  if (pupy == 630 && gameover == 0) {jump1 ()}
  if (gameover > 0) {resetgame ()}
  MyEvent.preventDefault();
}

addEventListener("touchstart", getplayerinput);     
addEventListener("mousedown", getplayerinput);     
addEventListener("keydown", getplayerinput);     

</script>
</body>
</html>